# 리팩터링: 첫 번째 예시

---
개인적으로 읽으면서 기억에 남았던 부분들을 정리한 글입니다.

## 1.2

- **프로그램이 새로운 기능을 추가하기에 편한 구조가 아니라면, 먼저 기능을 추가하기 쉬운 형태로 리팩터링하고 나서 원하는 기능을 추가한다.**
    - 마틴 파울러의 원칙 중 하나.
- 추가되는 요구 사항:
    1. HTML 로 출력이 가능해야 함
    2. 다양한 장르가 추가될 가능성을 염두에 둬야함
        1. 이는 공연료와 포인트 계산식에 영향을 줄 것

---

### 1.3

- **리팩터링하기 전에 제대로 된 테스트부터 마련한다. 테스트는 반드시 자가진단하도록 만든다.**
- 1장을 끝마치고 난 후의 소감으론, 테스팅이 명확하지 않으면 (테스트 코드를 믿을 수 없다면) 리팩터링을 하다 문제가 발생할 가능성이 높아질 것 같다는 생각이 들었다. 좀 더 명확하고 상황에 맞는 테스트와 리팩터링이 필요한 케이스가 있을텐데, 이를 더 고민해보면
  좋을 것 같다.

---

### 1.4

- **리팩터링은 프로그램 수정을 작은 단계로 나눠 진행한다. 그래서 중간에 실수하더라도 버그를 쉽게 찾을 수 있다.**
- **컴퓨터가 이해하는 코드는 바보도 작성할 수 있다. 사람이 이해하도록 작성하는 프로그래머가 진정한 실력자다.**
    - 많이 찔리는 격언.. 반성할 필요가 많이 있다고 느껴진다.
    - 이러한 이유에서 명확하고 간결한 네이밍이 중요하다는 것이 마틴 파울러의 의견
    - 역할이 모호한 매개변수의 네이밍 컨벤션 중 부정 관사 (a/an)을 붙이는 방법은 공부를 해보면 좋을 듯 하다.
        - SmallTalk Best Practice Patterns 라는 책에서 켄트 백이 다루는 듯 하다.
        - 솔직히 1장에서 다룬 내용만으로 이런 네이밍이 더 명확함이나 간결함을 주는지는 모르겠다. 역할이 모호한 객체에 대한 네이밍으로서의 컨벤션으로서의 역할을 의미하는 것인지?
- 지역변수를 최대한 제거하는 방향성.
    - 마틴 파울러는 최대한 지역변수의 활용을 줄이고 가능한 제거하려고 한다고 함.
    - 이는 로컬 범위에 존재하는 이름이 늘어나 추출 작업이 복잡해지는 이유 때문이라고.
    - 다만 현 예시에선 오히려 성능이 아주 조금이지만 떨어지는 결과가 초래되었다는 문제가 있음
-

---

## 1.7

보이스카웃룰 → 로버트 마틴, 켄트 벡, 마틴 파울러까지.. 이쪽 학파? 사람들이 항상 주장하는 키워드인 것 같다.

리팩터링과 기능 추가 사이의 균형. → 이 예제에서 마틴 파울러의 의견에는 출력 로직을 더 간결하게 만들 수도 있으나 멈추었다. 이는 빠른 진행을 위한 것인가?

---

## 1.8

amountFor 함수는 현재 장르에 따라 방식이 달라지는데 이러한 조건부 로직은 문제가 될 여지가 많음 → **다형성을 이용해 해결해 보자.**

---

## 1.10

**`좋은 코드를 가늠하는 확실한 방법은 ‘얼마나 수정하기 쉬운가’다.`**